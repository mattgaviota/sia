{% extends "versiones/list.html.jinja" %}
{% block header %}{{ super() }}{% endblock %}
{% block content %}
    {% include 'form_errors.html.jinja' %}
    {% include 'messages.html.jinja' %}
    <div>
        <span class="btn btn-success fileinput-button" id="button">
            <i class="glyphicon glyphicon-plus"></i>
            <span>Select files...</span>
            <input id="fileupload" type="file" name="file" data-url="{{ url_for('versiones.upload_file', folder_id=folder_id) }}">
        </span><br>
        <div class="progress">
            <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#fileupload').fileupload({
                dataType: 'json',
                done: function (e, data) {
                    $.each(data.result.files, function (index, file) {
                        $('<p/>').text(file.name).appendTo('#file');
                    });
                },
                progressall: function (e, data) {
                    var progress = parseInt(data.loaded / data.total * 100, 10);
                    $('.progress-bar').css(
                        'width',
                        progress + '%'
                    );
                }
            });
        });
    </script>
{% endblock %}
